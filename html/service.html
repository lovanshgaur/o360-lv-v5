<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Okomo 360 - Home</title>
    <link rel="stylesheet" href="../css/global.css" class="css">
    <link rel="stylesheet" href="../css/responsive.css" class="css">
    <link rel="stylesheet" href="../css/service.css" class="css">

</head>

<body>

    <!-- Reload Transition -->
    <div class="transition">
        <div class="transition-row row-1">
            <div class="block"></div>
            <div class="block"></div>
            <div class="block"></div>
            <div class="block"></div>
            <div class="block"></div>
        </div>
        <div class="transition-row row-2">
            <div class="block"></div>
            <div class="block"></div>
            <div class="block"></div>
            <div class="block"></div>
            <div class="block"></div>
        </div>
    </div>

    <!-- MainContainer -->
    <div id="container">

        <!-- -----------Nav Section----------- -->
        <nav>
            <div id="logo">
                <a href="../index.html"><img src="../img/logo.png" alt=""></a>
            </div>
            <div id="navbar">
                <div class="nav-icon" id="nav-icon">
                    <div class="bar"></div>
                    <div class="bar"></div>
                    <div class="bar"></div>
                </div>
                <div id="sidebar" class="sidebar">
                    <div class="link-container">
                        <a href="../index.html" class="active-link">Home</a>
                        <a href="service.html">Services</a>
                        <a href="about.html">About</a>
                        <a href="contact.html">Connect</a>
                    </div>
                </div>
            </div>
        </nav>
        <!-- -----------Nav Section------------->
        <main id="main-serivce">
            <div class="service-panels">

                <div class="service-panel init" data-service-section="1" data-href="overview">
                    <div class="service-panel-content">
                        <div class="service-panel__title">Overview</div>
                        <div class="service-panel__number">1</div>
                    </div>
                </div>

                <div class="service-panel init" data-service-section="2" data-href="design">
                    <div class="service-panel-content">
                        <div class="service-panel__title">Design</div>
                        <div class="service-panel__number">2</div>
                    </div>
                </div>

                <div class="service-panel init" data-service-section="3" data-href="development">
                    <div class="service-panel-content">
                        <div class="service-panel__title">Development</div>
                        <div class="service-panel__number">3</div>
                    </div>
                </div>

                <div class="service-panel init" data-service-section="4" data-href="marketing">
                    <div class="service-panel-content">
                        <div class="service-panel__title">Marketing</div>
                        <div class="service-panel__number">4</div>
                    </div>
                </div>

                <div class="service-panel init" data-service-section="5" data-href="support">
                    <div class="service-panel-content">
                        <div class="service-panel__title">Support</div>
                        <div class="service-panel__number">5</div>
                    </div>
                </div>

                <div class="service-panel init" data-service-section="6" data-href="support">
                    <div class="service-panel-content">
                        <div class="service-panel__title">Support</div>
                        <div class="service-panel__number">6</div>
                    </div>
                </div>

                <div class="service-panel init" data-service-section="7" data-href="support">
                    <div class="service-panel-content">
                        <div class="service-panel__title">Support</div>
                        <div class="service-panel__number">7</div>
                    </div>
                </div>

                <div class="service-panel init" data-service-section="8" data-href="support">
                    <div class="service-panel-content">
                        <div class="service-panel__title">Support</div>
                        <div class="service-panel__number">8</div>
                    </div>
                </div>

            </div>

            <div class="container" data-scroll-container>
                <div class="wrap" data-scroll-section>

                    <section class="service-section overview" data-service-section="1" id="overview">
                        Overview Lorem Ipsum is <br> simply dummy text of the <br> printing and typesetting <br>
                        industry.
                    </section>

                    <section class="service-section design" data-service-section="2" id="design">
                        Design Lorem Ipsum is <br> simply dummy text of the <br> printing and typesetting <br> industry.
                    </section>

                    <section class="service-section development" data-service-section="3" id="development">
                        Development Lorem Ipsum is <br> simply dummy text of the <br> printing and typesetting <br>
                        industry.
                    </section>

                    <section class="service-section marketing" data-service-section="4" id="marketing">
                        Marketing Lorem Ipsum is <br> simply dummy text of the <br> printing and typesetting <br>
                        industry.
                    </section>

                    <section class="service-section support" data-service-section="5" id="support">
                        Support Lorem Ipsum is <br> simply dummy text of the <br> printing and typesetting <br>
                        industry.
                    </section>

                    <section class="service-section support" data-service-section="6" id="support">
                        Support Lorem Ipsum is <br> simply dummy text of the <br> printing and typesetting <br>
                        industry.
                    </section>

                    <section class="service-section support" data-service-section="7" id="support">
                        Support Lorem Ipsum is <br> simply dummy text of the <br> printing and typesetting <br>
                        industry.
                    </section>

                    <section class="service-section support" data-service-section="8" id="support">
                        Support Lorem Ipsum is <br> simply dummy text of the <br> printing and typesetting <br>
                        industry.
                    </section>

                </div>
            </div>

        </main>



    </div>


    <!-- GSAP Libraries  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"
        integrity="sha512-7eHRwcbYkK4d9g/6tD/mhkf++eoTHwpNM9woBxtPUBWm67zeAfFC+HrdoE2GanKeocly/VxeLvIqwvCdk7qScg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"
        integrity="sha512-onMTRKJBKz8M1TnqqDuGBlowlH0ohFzMXYRNebz+yOcc5TQr/zAKsthzhuv0hiyUKEiQEQXEynnXCvNTOk50dg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- LocomotiveScroll -->
    <script src="https://cdn.jsdelivr.net/npm/locomotive-scroll@4.0.6/dist/locomotive-scroll.min.js"></script>


    <script src="../js/global.js"></script>
    <script src="../js/reloadTransition.js"></script>

    <script>
 // Initialize LocomotiveScroll
const scroll = new LocomotiveScroll({
    el: document.querySelector('[data-scroll-container]'),
    smooth: true,
    direction: "horizontal",
});

// Function to change background
const changeBackground = (index) => {
    const mainService = document.querySelector("#main-serivce");
    const backgrounds = {
        "1": "url(../img/service/real-estate.png)",  
        "2": "url(../img/service/extreme-sport.png)",
        "3": "url(../img/service/tourism.png)",  
        "4": "url(../img/service/concert.png)", 
        "5": "url(../img/service/educational.png)",
        "6": "url(../img/service/educational.png)",
        "7": "url(../img/service/educational.png)",
        "8": "url(../img/service/educational.png)",
    };

    // Update the background with a fade effect
    mainService.style.transition = "background-image 0.5s ease-in-out";
    mainService.style.backgroundImage = backgrounds[index];
};

// Detect active panel and trigger background change
scroll.on("scroll", (instance) => {
    const panels = document.querySelectorAll(".service-panel[data-service-section]");
    panels.forEach((panel) => {
        const sectionId = panel.getAttribute("data-service-section");
        const section = document.querySelector(`.service-section[data-service-section="${sectionId}"]`);

        if (section) {
            const sectionLeft = section.getBoundingClientRect().left;
            const viewportWidth = window.innerWidth;

            if (sectionLeft <= viewportWidth / 2 && sectionLeft >= -viewportWidth / 2) {
                // Trigger background change for the active panel
                changeBackground(sectionId);
            }
        }
    });
});

// Panel positioning logic
let panels = document.querySelectorAll(".service-panel[data-service-section]");
scroll.on("scroll", () => {
    panels.forEach((panel) => {
        let attr = panel.getAttribute("data-service-section");
        let section = document.querySelector(`section[data-service-section="${attr}"]`);

        if (section) {
            let sectionLeft = section.getBoundingClientRect().left;

            // For the Overview panel (always fixed)
            if (attr === "1") {
                panel.classList.add("fixed");
                panel.style.left = "0";
            } else {
                if (sectionLeft <= panel.offsetWidth * attr) {
                    panel.classList.add("fixed");
                    panel.classList.remove("init");
                    panel.style.left = `${(attr - 1) * panel.offsetWidth}px`;
                } else {
                    panel.classList.add("init");
                    panel.classList.remove("fixed");
                    panel.style.left = `calc(100vw - ${4 * (9 - attr)}rem)`;
                }
            }
        }
    });
});
   </script>
</body>

</html>